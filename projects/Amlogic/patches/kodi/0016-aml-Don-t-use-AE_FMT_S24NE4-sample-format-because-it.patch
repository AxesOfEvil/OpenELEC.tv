From d17e2de5bacf2273c253cf0c34d17462b8691942 Mon Sep 17 00:00:00 2001
From: Alex Deryskyba <alex@codesnake.com>
Date: Tue, 14 Oct 2014 23:12:18 +0300
Subject: [PATCH 16/16] [aml] Don't use AE_FMT_S24NE4 sample format because it
 results in distorted sound with 3.10.33 kernel

---
 xbmc/cores/AudioEngine/Sinks/AESinkALSA.cpp |    5 +++++
 1 file changed, 5 insertions(+)

diff --git a/xbmc/cores/AudioEngine/Sinks/AESinkALSA.cpp b/xbmc/cores/AudioEngine/Sinks/AESinkALSA.cpp
index af3dd8a..8acd211 100644
--- a/xbmc/cores/AudioEngine/Sinks/AESinkALSA.cpp
+++ b/xbmc/cores/AudioEngine/Sinks/AESinkALSA.cpp
@@ -720,6 +720,11 @@ bool CAESinkALSA::InitializeHW(const ALSAConfig &inconfig, ALSAConfig &outconfig
       if (m_passthrough && i != AE_FMT_S16BE && i != AE_FMT_S16LE)
 	continue;
 
+#ifdef HAS_LIBAMCODEC
+      if (i == AE_FMT_S24NE4)
+        continue;
+#endif
+
       fmt = AEFormatToALSAFormat(i);
 
       if (fmt == SND_PCM_FORMAT_UNKNOWN || snd_pcm_hw_params_set_format(m_pcm, hw_params, fmt) < 0)
-- 
1.7.9.5

